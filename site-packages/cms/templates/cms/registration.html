{% extends "admin/base_site.html" %}
{% load i18n static %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script>

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" href="{% static "admin/css/login.css" %}">
{{ form.media }}
{% endblock %}

{% block bodyclass %}{{ block.super }} login{% endblock %}

{% block usertools %}{% endblock %}

{% block nav-global %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content_title %}{% endblock %}

{% block nav-breadcrumbs %}{% endblock %}

{% block content %}
{% if form.errors and not form.non_field_errors %}
<p class="errornote">
{% blocktranslate count counter=form.errors.items|length %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktranslate %}
</p>
{% endif %}

{% if form.non_field_errors %}
{% for error in form.non_field_errors %}
<p class="errornote">
    {{ error }}
</p>
{% endfor %}
{% endif %}

<div id="content-main">

<form action="{{ app_path }}" method="post" id="login-form">{% csrf_token %}
  <div class="form-row">
    {{ form.errors }}
    <br>
    <label class=""><b>Usuario:<b></label>
    {% comment %} {{ form.username.label_tag }}  {% endcomment %}
    {{ formUsuario.username }}
  </div>
  <div class="form-row">
    <label class=""><b>Contraseña:</b></label>    
  </div>
  <div class="fila">
    {{ formUsuario.password1 }}
    <input class="item" type="button" style="margin-left: 5%; flex-basis: 10%;" id="ver" onclick="togglePasswordVisibility('id_password1')" />
  </div>
  <div class="form-row">
    <label class=""><b>Confirmar contraseña:</b></label>
  </div>
  <div class="fila">
    {{ formUsuario.password2 }}
    <input class="item" type="button" style="margin-left: 5%; flex-basis: 10%;" id="ver" onclick="togglePasswordVisibility('id_password2')" />
  </div>
  <div class="form-row">
    <div class="fila">
     <input type="hidden"  name="next" value="{{ next }}">
    </div>
  </div>
  
  <style>
    .form-row-mod {
      display: flex;
      align-items: center;
    }

    #ver {
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }
  
    .password-wrapper {
      flex-grow: 1;
    }
  
    button {
      margin-left: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: none;
      padding: 0;
    }

    .fila {
      justify-content: space-between;
      display: flex;
    }

    .item {
      padding: 10px;
    }
  </style>

<script>
    function togglePasswordVisibility(id_boton) {
        var passwordInput = document.getElementById(id_boton);
        var toggleButton = document.querySelector(".form-row button");
        
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            toggleButton.innerHTML = "<i class='fas fa-eye-slash'></i>";
        } else {
            passwordInput.type = "password";
            toggleButton.innerHTML = "<i class='fas fa-eye'></i>";
        }
    }
</script>

  {% url 'admin_password_reset' as password_reset_url %}
  {% if password_reset_url %}
  <div class="password-reset-link">
    <a href="{{ password_reset_url }}">{% translate 'Forgotten your password or username?' %}</a>
  </div>
  {% endif %}
  <div class="submit-row">
      <div class="fila">
        <a href="{% url 'admin:index' %}">{% translate 'Regresar' %}</a>
        <input type="submit" value="{% translate 'Registrarme' %}">        
    </div>
  </div> 
</form>

</div>
{% endblock %}
